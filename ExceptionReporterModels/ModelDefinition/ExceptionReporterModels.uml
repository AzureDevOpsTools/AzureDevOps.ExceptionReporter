<?xml version="1.0" encoding="utf-8"?>
<modelStoreModel xmlns:dm0="http://schemas.microsoft.com/VisualStudio/2008/DslTools/Core" xmlns:dm1="http://schemas.microsoft.com/dsltools/Kernel" xmlns:dm2="http://schemas.microsoft.com/dsltools/Component" xmlns:dm3="http://schemas.microsoft.com/dsltools/UseCase" xmlns:dm4="http://schemas.microsoft.com/dsltools/Activity" xmlns:dm5="http://schemas.microsoft.com/dsltools/Interaction" xmlns:dm6="http://schemas.microsoft.com/dsltools/UmlModelLibrary" xmlns:dm7="http://schemas.microsoft.com/dsltools/UmlDiagrams" xmlns:dm8="http://schemas.microsoft.com/VisualStudio/TeamArchitect/ComponentDesigner"
  dslVersion="1.0.0.0"
  Id="73612808-557f-49ba-9a35-e4e008f1a8d3"
  name="ExceptionReporterModels" xmlns="http://schemas.microsoft.com/dsltools/ModelStore">
  <ownedCommentsInternal>
    <comment
      Id="78660bac-0fe5-4a97-be88-1e63f98e8d86">
      <body>AppDomain.CurrentDomain.UnhandledException</body>
      <annotatedElements>
        <opaqueActionMoniker
          Id="5fa9c852-1fe1-4a47-b605-159b20789711"
          LastKnownName="Registerd Unhandled delegates"
          LastKnownLocation="ExceptionReporterModels.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="f14f6d48-85a2-46bf-9fc7-49ed764e77e8">
      <body>			WPF
Application UI Thread:
	Application.Current.DispatcherUnhandledException
Own UI Thread:
	window.Dispatcher.UnhandledException
Filter
	Dispatcher.UnhandledExceptionFilter</body>
      <annotatedElements>
        <opaqueActionMoniker
          Id="311bd842-df73-4b09-9685-c136e587bead"
          LastKnownName="Handle exception: &#xD;&#xA;Determine if exception is recoverable"
          LastKnownLocation="ExceptionReporterModels.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="d11aa8e3-ca00-4e70-88ef-b6b59ba4470e">
      <body>			WinForms

Application.ThreadException</body>
      <annotatedElements>
        <opaqueActionMoniker
          Id="311bd842-df73-4b09-9685-c136e587bead"
          LastKnownName="Handle exception: &#xD;&#xA;Determine if exception is recoverable"
          LastKnownLocation="ExceptionReporterModels.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="8137ca24-91c5-4658-9e9c-8460f79fb909">
      <body>The exception log file is located in 

	%PROGRAMDATA%\inmeta\Exceptions\

The max file size for the log file is spesified in the 
&lt;appSettings&gt;
	...
	&lt;add key="ExceptionFileSizeInMB" value="1" /&gt;
	...
&lt;/appSettings&gt; 
These settings are available in the web.config. 
If the log file exceeds the ExceptionFileSizeInMB, the exception will not be logged and a Warning Event Log will be created. </body>
      <annotatedElements>
        <componentMoniker
          Id="c47b447b-c483-482f-b6dc-ad49a98afa06"
          LastKnownName="Lokal Fil loggin"
          LastKnownLocation="ExceptionReporterModels.uml" />
        <partMoniker
          Id="01528866-aaa2-44cf-97ea-fcc2cbcc492f"
          LastKnownName="File Logging"
          LastKnownLocation="ExceptionReporterModels.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="8eed16b9-c9cb-4e04-87e7-347915a0371b">
      <body>Inmeta.Exception.Reporter.Web.Service will log all exception to lokal file in XML format.
</body>
      <annotatedElements>
        <componentMoniker
          Id="544b4cad-5728-416d-a9a8-8005aaf79c00"
          LastKnownName="Inmeta.Exception.Reporter.Web.Service"
          LastKnownLocation="ExceptionReporterModels.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="51c7fc8b-b8dd-459c-915f-dd21f0f6e793">
      <body>Inmeta.Exception.Service.Proxy.Reader will call GetExceptions from Inmet.aExcpetion.Report.Web.Service at a configurable interval:

  &lt;appSettings&gt;
    &lt;add key="pollintervall" value="60"/&gt;
    &lt;add key="serviceURL" value="http://localhost:2119/service.asmx"/&gt;
    &lt;add key="username" value="ValueSetATInstallTime"/&gt;
    &lt;add key="password" value="ValueSetAtInstallTime" /&gt;
    &lt;add key="domain" value="ValueSetAtInstallTime" /&gt;
  &lt;/appSettings&gt;</body>
      <annotatedElements>
        <componentMoniker
          Id="47dab9b1-3f0d-48e6-b9ce-2b5e6090b79d"
          LastKnownName="Inmeta.Exception.Service.Proxy.Reader"
          LastKnownLocation="ExceptionReporterModels.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="b56d8be1-93ad-441f-9f2b-ca8e99c70b5d">
      <body>It is possible to configure exception reporting settings per team project. 
    Configurable settings are AssignedTo for created exception-workitems, 
    and what area-path exceptions should be created under.
    To configure this, create an appsetting with "key" set to the name of the team project. 
    "value" should be set to the person who should be assigned the exceptions in that project.
    To also specify area-path, set "value" to AreaPath;AssignedTo (separated by semicolon).

    &lt;add key="Lars_KM_sim_exception_test" value="Inmeta;Lars Nilsson"/&gt; 
    &lt;add key="Byggtjeneste - Projects" value="Sølvi Skilbrei"/ --&gt;
    &lt;add key="TFSServer" value="TFS SERVER URI"/&gt;
    &lt;add key="WorkItemTrackingCacheRoot" value="LOCAL CACHE FILE"/&gt;

Settings are spesified in the web.config file.</body>
      <annotatedElements>
        <partMoniker
          Id="5aaa0b3f-53e0-4773-bc52-349cc9f1fddd"
          LastKnownName="TFS"
          LastKnownLocation="ExceptionReporterModels.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="2d974b46-a0ad-4369-8bea-cc65f746bf3b">
      <body>All logs are located at:
%PROGRAMDATA%\Inmeta\ExceptionReporter
They are configured with Log4Net using rollingfile.
Layout is tekst not XML. The text formating layout is: "%date [%thread] %-5level %logger - %message%newline
</body>
      <annotatedElements>
        <opaqueActionMoniker
          Id="ad7d483c-42bc-4d1b-a897-9f7dcaac5571"
          LastKnownName="Log Exception as Undelivered"
          LastKnownLocation="ExceptionReporterModels.uml" />
        <opaqueActionMoniker
          Id="a71874ef-3a50-4741-9c79-dc2525d790fa"
          LastKnownName="Log delivery failure"
          LastKnownLocation="ExceptionReporterModels.uml" />
        <opaqueActionMoniker
          Id="a2d6e668-6cb8-4949-a994-aaab9b9f8af6"
          LastKnownName="Log Delivered Exception "
          LastKnownLocation="ExceptionReporterModels.uml" />
      </annotatedElements>
    </comment>
    <comment
      Id="ace6e725-8fc0-45f9-8cf3-66830cf81691">
      <body>All kommunikasjon er ren HTTP/SOAP/XML over port 80 ukryptert.</body>
    </comment>
  </ownedCommentsInternal>
  <profileInstances>
    <packageHasProfileInstances
      Id="0caec977-1f8c-4ba3-a7db-8cc9ad9cc73b">
      <profileInstance
        Id="e34d544e-0fea-4ed6-ac5e-1b74119ac791"
        name="StandardProfileL2" />
    </packageHasProfileInstances>
    <packageHasProfileInstances
      Id="29349502-908c-4fda-9054-c48619c59ed0">
      <profileInstance
        Id="532ea607-fb19-44b8-8502-3351b05452be"
        name="StandardProfileL3" />
    </packageHasProfileInstances>
  </profileInstances>
  <packagedElements>
    <packageHasNamedElement>
      <interaction
        Id="4568eca5-f247-4192-806a-732174d4f1f1"
        name="UnhandledExceptions"
        collapseFragmentsFlag="false"
        isActiveClass="false"
        isAbstract="false"
        isLeaf="false"
        isReentrant="false" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <activity
        Id="c85f6352-468a-48cf-9292-97591a65a508"
        name="UnhandledExcpetionFlow"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false">
        <nodes>
          <opaqueAction
            Id="1367ce6a-91ac-4334-8653-43e7e292f7b5"
            name="Application detects unhandled exception"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="98873da6-f753-4933-9f05-6775710a9f73"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="61bac6f4-85ac-4a85-8c74-40466162344e"
                  LastKnownName="UI Thread"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
              <controlFlow
                Id="2a6eb32d-1e85-496b-a10b-118cd32b18fb"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="13c36944-0be0-4468-a470-0305c87fe858"
                  LastKnownName="Child Thread"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="61bac6f4-85ac-4a85-8c74-40466162344e"
            name="UI Thread"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="7d778f5b-1ee6-472b-9c72-b97cc9c57814"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="292807ec-64ae-47a3-b59d-aadb743ff5d6"
                  LastKnownName="Decision2"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="13c36944-0be0-4468-a470-0305c87fe858"
            name="Child Thread"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="167e4125-2672-474e-a30c-8cfc695cb55f"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="701e3478-28bd-434e-a21b-b2702244f7de"
                  LastKnownName="Unrecoverable exception"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="311bd842-df73-4b09-9685-c136e587bead"
            name="Handle exception: &#xD;&#xA;Determine if exception is recoverable"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="2b33cd74-c175-4517-9f3d-ca658fb5c64a"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="06bc2e1b-0d09-46c5-a04b-8c059794ed93"
                  LastKnownName="Is it handled"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="06bc2e1b-0d09-46c5-a04b-8c059794ed93"
            name="Is it handled"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="e659c7ed-90b4-4797-9928-b869c50d76d1"
                guard="Recoverable"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="36d0594c-c38f-4dbc-8cbc-0b04e6cb921f"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
              <controlFlow
                Id="714d0939-33ed-4f70-b3d7-5786074006b6"
                guard="Unrecoverable"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="701e3478-28bd-434e-a21b-b2702244f7de"
                  LastKnownName="Unrecoverable exception"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="621bd72a-7bd9-450e-bdb1-1b53fb7a14db"
            name="Windows default Crash handling"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="d6d0d2f8-118b-4fd6-b94c-2ce5903acd79"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="36d0594c-c38f-4dbc-8cbc-0b04e6cb921f"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <activityFinalNode
            Id="36d0594c-c38f-4dbc-8cbc-0b04e6cb921f"
            name="ActivityFinal1"
            isLeaf="false" />
          <opaqueAction
            Id="5fa9c852-1fe1-4a47-b605-159b20789711"
            name="Registerd Unhandled delegates"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="0733f8aa-d2f9-46b9-ac81-68014d988685"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="883d7ff5-093d-48d4-8c71-4189b01e683c"
                  LastKnownName="Decision1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="883d7ff5-093d-48d4-8c71-4189b01e683c"
            name="Decision1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="a4370e7b-166d-4921-a836-13d2424160e6"
                guard="Do nothing"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="621bd72a-7bd9-450e-bdb1-1b53fb7a14db"
                  LastKnownName="Windows default Crash handling"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
              <controlFlow
                Id="ef2bc97f-d381-4570-8ada-c7997a1c605d"
                guard="Terminate Application"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="7da749c7-a980-4202-b96f-352a9f22c0d1"
                  LastKnownName="Controlled terminate"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <decisionNode
            Id="292807ec-64ae-47a3-b59d-aadb743ff5d6"
            name="Decision2"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="5843afe5-5f01-4bdb-841b-999b1b1518a6"
                guard="Has subscribers"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="311bd842-df73-4b09-9685-c136e587bead"
                  LastKnownName="Handle exception: &#xD;&#xA;Determine if exception is recoverable"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
              <controlFlow
                Id="b028ed6d-7a33-425d-92d7-75625e7a4165"
                guard="No subscribers"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="701e3478-28bd-434e-a21b-b2702244f7de"
                  LastKnownName="Unrecoverable exception"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="701e3478-28bd-434e-a21b-b2702244f7de"
            name="Unrecoverable exception"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="e3cbf525-140d-4745-8599-b7107a899fe1"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="90f26509-abd1-459c-a67f-d4cf34ac11a7"
                  LastKnownName="Decision3"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="90f26509-abd1-459c-a67f-d4cf34ac11a7"
            name="Decision3"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="00b399ec-bfea-4849-91b3-1b08fa6e0524"
                guard="Has subscribers"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="5fa9c852-1fe1-4a47-b605-159b20789711"
                  LastKnownName="Registerd Unhandled delegates"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
              <controlFlow
                Id="c806746b-4423-4fb4-8bb2-8cf3b6a0f9e6"
                guard="No subscribers"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="621bd72a-7bd9-450e-bdb1-1b53fb7a14db"
                  LastKnownName="Windows default Crash handling"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="7da749c7-a980-4202-b96f-352a9f22c0d1"
            name="Controlled terminate"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="cacf9265-e6d4-44b1-81e3-1674482a00f1"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="36d0594c-c38f-4dbc-8cbc-0b04e6cb921f"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <initialNode
            Id="1ba6aaf6-8756-4965-b702-6173ff4e2a64"
            name="Initial1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="fbd70640-0e6a-4ff0-8a99-77fe398e147c"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="1367ce6a-91ac-4334-8653-43e7e292f7b5"
                  LastKnownName="Application detects unhandled exception"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </initialNode>
        </nodes>
      </activity>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <activity
        Id="1672fa05-c94a-41fa-b483-0bab65d29833"
        name="Client Reporting Exception"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <component
        Id="9bf7fe9d-1eee-4802-9146-4aee0c7812a4"
        name="Hosting Application"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false">
        <appliedStereotypesInternal>
          <stereotypeInstance
            Id="9e439bdd-17d6-421d-bdff-73960f49c8b8"
            name="process"
            profile="StandardProfileL2" />
        </appliedStereotypesInternal>
      </component>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <component
        Id="544b4cad-5728-416d-a9a8-8005aaf79c00"
        name="Inmeta.Exception.Reporter.Web.Service"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false">
        <appliedStereotypesInternal>
          <stereotypeInstance
            Id="26ef4de3-a9a6-4410-af86-83751eea02b8"
            name="service"
            profile="StandardProfileL2" />
        </appliedStereotypesInternal>
        <suppliersInternal>
          <dependency
            Id="9377676f-af95-4f0a-8814-44c152034d2a">
            <componentMoniker
              Id="c47b447b-c483-482f-b6dc-ad49a98afa06"
              LastKnownName="Lokal Fil loggin"
              LastKnownLocation="ExceptionReporterModels.uml" />
          </dependency>
          <dependency
            Id="bc4574d9-d8d7-4886-8f8c-b730fd2b9d2f">
            <componentMoniker
              Id="304d14ba-788f-4cd6-a45b-3c5b525d4645"
              LastKnownName="TFS"
              LastKnownLocation="ExceptionReporterModels.uml" />
          </dependency>
        </suppliersInternal>
        <ownedAttributesInternal>
          <part
            Id="5aaa0b3f-53e0-4773-bc52-349cc9f1fddd"
            name="TFS"
            isLeaf="false"
            isStatic="false"
            isReadOnly="false"
            isDerived="false"
            isDerivedUnion="false"
            aggregation="Composite"
            isComposite="true">
            <type_NamedElement>
              <componentMoniker
                Id="a5bda3e0-1e2b-4c36-be64-e5c4ee44b4ce"
                LastKnownLocation="ExceptionReporterModels.uml" />
            </type_NamedElement>
          </part>
          <part
            Id="01528866-aaa2-44cf-97ea-fcc2cbcc492f"
            name="File Logging"
            isLeaf="false"
            isStatic="false"
            isReadOnly="false"
            isDerived="false"
            isDerivedUnion="false"
            aggregation="Composite"
            isComposite="true">
            <type_NamedElement>
              <componentMoniker
                Id="b3932635-31f7-4c72-9a3e-386b1beb7833"
                LastKnownName="Component3"
                LastKnownLocation="ExceptionReporterModels.uml" />
            </type_NamedElement>
          </part>
        </ownedAttributesInternal>
      </component>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <component
        Id="c47b447b-c483-482f-b6dc-ad49a98afa06"
        name="Lokal Fil loggin"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <component
        Id="304d14ba-788f-4cd6-a45b-3c5b525d4645"
        name="TFS"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <activity
        Id="230e5224-b11f-4423-96e7-a250e75b5d30"
        name="Web.Service.Exception.AddException"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false">
        <nodes>
          <initialNode
            Id="c52c4aee-8287-47fc-89e1-6392df811402"
            name="WebMethod.AddException"
            isLeaf="false">
            <description>Received exception through webMethod</description>
            <flowNodeTargets>
              <controlFlow
                Id="338c1d31-b0bd-4985-9d6d-86439c9b0d35"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="039689c5-55cc-4948-aeb1-315b30f03f03"
                  LastKnownName="Log To File"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </initialNode>
          <decisionNode
            Id="3668adaf-e97c-4b3d-bc7b-5e6fb27cd606"
            name="IsTFSEnabled"
            isLeaf="false">
            <description>deceide if TFS logging is enabled</description>
            <flowNodeTargets>
              <controlFlow
                Id="4644ee0d-6c66-4d83-bea0-5acfb734cdd0"
                guard="&lt;add key=&quot;UseTFS&quot; value=&quot;true&quot; /&gt;"
                isLeaf="false">
                <callBehaviorActionMoniker
                  Id="083b556d-352c-4519-a15e-8cd370e21b26"
                  LastKnownName="Save To TFS"
                  LastKnownLocation="ExceptionReporterModels.uml" />
                <description>This key is located in web.config file</description>
              </controlFlow>
              <controlFlow
                Id="47ac9ff7-e869-4a29-9e40-8cefdf305f3d"
                guard="&lt;add key=&quot;UseTFS&quot; value=&quot;true&quot; /&gt;"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="888fd23b-4c6c-4e6e-8283-623faf89b893"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
                <description>This key is located in web.config file</description>
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="039689c5-55cc-4948-aeb1-315b30f03f03"
            name="Log To File"
            isLeaf="false">
            <description>Log exception in XML format</description>
            <flowNodeTargets>
              <controlFlow
                Id="06da7f72-a8b7-48af-82de-d5b80d14a174"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="3668adaf-e97c-4b3d-bc7b-5e6fb27cd606"
                  LastKnownName="IsTFSEnabled"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <activityFinalNode
            Id="888fd23b-4c6c-4e6e-8283-623faf89b893"
            name="ActivityFinal1"
            isLeaf="false" />
          <callBehaviorAction
            Id="083b556d-352c-4519-a15e-8cd370e21b26"
            name="Save To TFS"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="0ae45260-ea88-4c81-8965-e8d52e4005f6"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="888fd23b-4c6c-4e6e-8283-623faf89b893"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
            <behavior>
              <activityMoniker
                Id="0b25c3bd-94dc-4442-b57e-1589ef7629db"
                LastKnownName="SaveToTFS"
                LastKnownLocation="ExceptionReporterModels.uml" />
            </behavior>
          </callBehaviorAction>
        </nodes>
      </activity>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <activity
        Id="5f335422-7dd9-4f26-bec7-bf884cab95fb"
        name="Activity1"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false">
        <nodes>
          <initialNode
            Id="f4cb3688-1d8c-41a2-942c-14372b9ee494"
            name="ExceptionIsTrapped"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="b76b9d16-a1f3-4823-9f26-848fe012a045"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="f1f0befe-2fc6-4b17-b656-c1e8b1009883"
                  LastKnownName="Is this exception same as previous"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </initialNode>
          <decisionNode
            Id="f1f0befe-2fc6-4b17-b656-c1e8b1009883"
            name="Is this exception same as previous"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="04ae1e28-8088-4a79-84b1-89ff5b90d4ee"
                guard="Exception is same as previous"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="58075b7b-e433-4753-84ec-eaeb550123c3"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
              <controlFlow
                Id="1f474a9d-ed5c-4053-be06-e19bfaf4a64a"
                guard="Exception is not same as previous"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="8889d9e2-12da-423f-9e1c-3fa2c8053baf"
                  LastKnownName="Decision1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <activityFinalNode
            Id="58075b7b-e433-4753-84ec-eaeb550123c3"
            name="ActivityFinal1"
            isLeaf="false" />
          <decisionNode
            Id="8889d9e2-12da-423f-9e1c-3fa2c8053baf"
            name="Decision1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="288775fe-8910-47a0-91f5-4720cd721c35"
                guard="Not 'UseReportingUI'"
                isLeaf="false">
                <callBehaviorActionMoniker
                  Id="293aec6f-6fe9-4615-aa52-46a7d78dae74"
                  LastKnownName="Post to Exception Service"
                  LastKnownLocation="ExceptionReporterModels.uml" />
                <description>The UseReportingUI is either controlled through the API (ExceptionRegistrator.UseReportingUI) or through the &lt;appsettings&gt; section.

During the call to ExceptionRegistrator.Register() the setting &lt;add key="ExceptionReporterUseGUI" /&gt;  in the &lt;appsettings&gt; section 
in the hosting appliction.exe.connfig will override any previous call to ExceptionRegistrator.UseReportingUI.
After that subsequent calls to ExceptionRegistrator.UseReportingUI will govern.

</description>
              </controlFlow>
              <controlFlow
                Id="6c87e197-d7f9-466b-a363-3e09369da497"
                guard="UseReportingUI is true"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="787708bb-235e-4f5e-ba3d-19a55cb02ea6"
                  LastKnownName="Create user friendlty Exception text. "
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="787708bb-235e-4f5e-ba3d-19a55cb02ea6"
            name="Create user friendlty Exception text. "
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="efb0a4a8-79f1-46c3-b246-bad8c396dc8d"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="de4d02b2-cb1d-401b-9273-8816af00b2ef"
                  LastKnownName="Call ReportForm to display text and capture description from user."
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
            <body>The user friendly text is:
1) Exception Message 
2) Reverse StackTrace with inner exceptions.

This is the text which will be displayed to the user.</body>
          </opaqueAction>
          <opaqueAction
            Id="de4d02b2-cb1d-401b-9273-8816af00b2ef"
            name="Call ReportForm to display text and capture description from user."
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="2e404322-3db7-42f0-87c6-ab4887f416c3"
                isLeaf="false">
                <forkNodeMoniker
                  Id="c14cb46c-0d48-43c5-b694-adc886cfa01f"
                  LastKnownName="Fork1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <sendSignalAction
            Id="47befc27-e7a8-4cba-84d7-72a1257059d0"
            name="DoPost"
            isLeaf="false">
            <description>The user click decides to post the exception</description>
            <flowNodeTargets>
              <controlFlow
                Id="e311dce6-55ff-40e5-9693-ee56eb90e960"
                isLeaf="false">
                <acceptEventActionMoniker
                  Id="68e8a06a-36a4-43e0-aa26-0619be47db87"
                  LastKnownName="DoPost"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </sendSignalAction>
          <forkNode
            Id="c14cb46c-0d48-43c5-b694-adc886cfa01f"
            name="Fork1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="8f64097c-dec7-492e-be74-9b29652a274b"
                isLeaf="false">
                <sendSignalActionMoniker
                  Id="47befc27-e7a8-4cba-84d7-72a1257059d0"
                  LastKnownName="DoPost"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
              <controlFlow
                Id="b307a12f-cbf5-4a3d-b6d1-31e5b0231bca"
                isLeaf="false">
                <sendSignalActionMoniker
                  Id="288404b9-80f6-449c-b09b-11936682d828"
                  LastKnownName="DoCancel"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </forkNode>
          <sendSignalAction
            Id="288404b9-80f6-449c-b09b-11936682d828"
            name="DoCancel"
            isLeaf="false">
            <description>The user descides to not send the exception to TFS.</description>
            <flowNodeTargets>
              <controlFlow
                Id="c4e62aee-f4b5-487b-856b-ef5377b0daea"
                isLeaf="false">
                <acceptEventActionMoniker
                  Id="be8f12bf-35e7-4aa1-bd99-37c2c078dedf"
                  LastKnownName="Do Cancel"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </sendSignalAction>
          <acceptEventAction
            Id="68e8a06a-36a4-43e0-aa26-0619be47db87"
            name="DoPost"
            isLeaf="false"
            isUnmarshall="false">
            <flowNodeTargets>
              <controlFlow
                Id="31cadc29-6e6c-4b58-9059-b8955b7e0c1d"
                isLeaf="false">
                <callBehaviorActionMoniker
                  Id="293aec6f-6fe9-4615-aa52-46a7d78dae74"
                  LastKnownName="Post to Exception Service"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </acceptEventAction>
          <acceptEventAction
            Id="be8f12bf-35e7-4aa1-bd99-37c2c078dedf"
            name="Do Cancel"
            isLeaf="false"
            isUnmarshall="false">
            <flowNodeTargets>
              <controlFlow
                Id="905480ad-8873-4786-8c62-9e74238d3277"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="ad7d483c-42bc-4d1b-a897-9f7dcaac5571"
                  LastKnownName="Log Exception as Undelivered"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </acceptEventAction>
          <opaqueAction
            Id="ad7d483c-42bc-4d1b-a897-9f7dcaac5571"
            name="Log Exception as Undelivered"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="82208b11-2c0f-4a2d-bb2a-40d74d475658"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="58075b7b-e433-4753-84ec-eaeb550123c3"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="06580ad0-4b30-4a27-9e7a-063bb71e149d"
            name="Decision2"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="b7817926-1f8d-4606-bb91-6c3764e153a0"
                guard="Delivered to web service"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="a2d6e668-6cb8-4949-a994-aaab9b9f8af6"
                  LastKnownName="Log Delivered Exception "
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
              <controlFlow
                Id="fb026c60-0b2b-4643-b605-4378a6e2f96c"
                guard="Deliver Failure"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="a71874ef-3a50-4741-9c79-dc2525d790fa"
                  LastKnownName="Log delivery failure"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="a71874ef-3a50-4741-9c79-dc2525d790fa"
            name="Log delivery failure"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="ecbc80e8-c73a-4962-9a05-bd324fc18b3e"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="58075b7b-e433-4753-84ec-eaeb550123c3"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <callBehaviorAction
            Id="293aec6f-6fe9-4615-aa52-46a7d78dae74"
            name="Post to Exception Service"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="03c1da71-66bc-415b-8b28-79c9f71015a3"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="06580ad0-4b30-4a27-9e7a-063bb71e149d"
                  LastKnownName="Decision2"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
            <behavior>
              <activityMoniker
                Id="230e5224-b11f-4423-96e7-a250e75b5d30"
                LastKnownName="Web.Service.Exception.AddException"
                LastKnownLocation="ExceptionReporterModels.uml" />
            </behavior>
          </callBehaviorAction>
          <opaqueAction
            Id="a2d6e668-6cb8-4949-a994-aaab9b9f8af6"
            name="Log Delivered Exception "
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="aed615f5-3b8f-4301-87c5-e65a7ec45348"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="58075b7b-e433-4753-84ec-eaeb550123c3"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
        </nodes>
      </activity>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <activity
        Id="2d953a1a-cc94-4f3f-a15a-9d2563037b0a"
        name="Web.Service.Exception.GetExceptions"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false">
        <nodes>
          <initialNode
            Id="cd00beab-b484-4121-80fc-55e2d901f2bd"
            name="Call to GetExceptions"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="61750cdb-956c-49a9-a6c2-4e1b77d5e423"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="982fd432-2bb5-4f83-9239-deebf2f988af"
                  LastKnownName="Read content from  %PROGRAMDATA%\INMETA\EXCEPTIONS\Exceptions.txt"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </initialNode>
          <activityFinalNode
            Id="71c01ff6-64ad-4e66-838c-a46fce70c55e"
            name="ActivityFinal1"
            isLeaf="false" />
          <decisionNode
            Id="573b51bb-3721-45f1-9735-16a1c1410889"
            name="Decision1"
            isLeaf="false">
            <description>Read </description>
            <flowNodeTargets>
              <controlFlow
                Id="0dd5301a-23cf-4379-bfcb-0cd21b03361b"
                guard="Failed to read  %PROGRAMDATA%\INMETA\EXCEPTIONS\Exceptions.txt"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="71c01ff6-64ad-4e66-838c-a46fce70c55e"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
                <description>Read content from %PROGRAMDATA%\INMETA\EXCEPTIONS\Exceptions.txt</description>
              </controlFlow>
              <controlFlow
                Id="9bb9a5a6-c56e-46ec-a371-266f0f110484"
                guard="Success reading from exception fiel"
                isLeaf="false">
                <callBehaviorActionMoniker
                  Id="ec09bbcf-0ef7-4ce5-9989-8c179ddc649a"
                  LastKnownName="Parse Exception file"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <callBehaviorAction
            Id="ec09bbcf-0ef7-4ce5-9989-8c179ddc649a"
            name="Parse Exception file"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="ef6dfb73-4921-45aa-a781-f088363cf119"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="48f75217-b4a7-478c-8052-d5fa295284a8"
                  LastKnownName="Move parsed file to old folder"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
            <behavior>
              <activityMoniker
                Id="85d29bea-df0f-4e31-91c5-6550d3e3625b"
                LastKnownName="ParseExceptions"
                LastKnownLocation="ExceptionReporterModels.uml" />
            </behavior>
          </callBehaviorAction>
          <opaqueAction
            Id="48f75217-b4a7-478c-8052-d5fa295284a8"
            name="Move parsed file to old folder"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="2614ba2a-462a-49be-919f-3aa4435b4efd"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="71c01ff6-64ad-4e66-838c-a46fce70c55e"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="982fd432-2bb5-4f83-9239-deebf2f988af"
            name="Read content from  %PROGRAMDATA%\INMETA\EXCEPTIONS\Exceptions.txt"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="091ddbde-b74c-4d6a-a815-c0261005dd7f"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="573b51bb-3721-45f1-9735-16a1c1410889"
                  LastKnownName="Decision1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
        </nodes>
      </activity>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <activity
        Id="85d29bea-df0f-4e31-91c5-6550d3e3625b"
        name="ParseExceptions"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false">
        <nodes>
          <initialNode
            Id="a49b841e-a57d-4344-8119-bba28d7ff303"
            name="Parse xml"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="2a5c6633-2f09-4969-a65b-60dee4f97f6e"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="37f8984d-2a5b-4ec6-903b-75351540692f"
                  LastKnownName="Split XML into fragments at &lt;?xml version=\&quot;1.0\&quot;?&gt; "
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </initialNode>
          <opaqueAction
            Id="37f8984d-2a5b-4ec6-903b-75351540692f"
            name="Split XML into fragments at &lt;?xml version=\&quot;1.0\&quot;?&gt; "
            isLeaf="false">
            <pins>
              <opaqueActionHasOutputValues>
                <outputPin
                  Id="4c2dde46-b3d0-46b6-8d29-acf414435309"
                  name="Exception XML"
                  isLeaf="false"
                  ordering="Unordered"
                  isControlType="false"
                  isControl="false">
                  <objectFlowTargets>
                    <objectFlow
                      Id="bf4006ce-4baa-4569-b513-d5af0a4c61ff"
                      isLeaf="false"
                      isMulticast="false"
                      isMultireceive="false">
                      <inputPinMoniker
                        Id="e639b736-4cd5-4d22-acd0-40ef19249497"
                        LastKnownName="Exception XML"
                        LastKnownLocation="ExceptionReporterModels.uml" />
                    </objectFlow>
                  </objectFlowTargets>
                  <upperBound>
                    <literalInteger
                      Id="f426cd7c-dc91-43b3-ac91-74119687ff55"
                      name="2147483647"
                      value="2147483647" />
                  </upperBound>
                </outputPin>
              </opaqueActionHasOutputValues>
            </pins>
          </opaqueAction>
          <opaqueAction
            Id="de0cfca0-bc06-47f5-8383-f9f0e2b5a6f0"
            name="Deserialize XML"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="63325bc7-e046-4eb8-86b1-1ffc016f29ee"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="38c907f9-6c1b-40c5-8349-5ff9e7c233e9"
                  LastKnownName="Decision1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
            <pins>
              <opaqueActionHasInputValues>
                <inputPin
                  Id="e639b736-4cd5-4d22-acd0-40ef19249497"
                  name="Exception XML"
                  isLeaf="false"
                  ordering="Unordered"
                  isControlType="false"
                  isControl="false">
                  <upperBound>
                    <literalInteger
                      Id="da44a952-e630-40f6-bb8c-6c524a783ba7"
                      name="2147483647"
                      value="2147483647" />
                  </upperBound>
                </inputPin>
              </opaqueActionHasInputValues>
            </pins>
          </opaqueAction>
          <decisionNode
            Id="38c907f9-6c1b-40c5-8349-5ff9e7c233e9"
            name="Decision1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="bf1cc69b-5d9a-49ba-9d5f-ae89f3e8f25b"
                guard="Failed to deserialize xml"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="dfafab74-50f3-4123-908c-0d17373245d1"
                  LastKnownName="Save XML Fragment into failed file"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
            <objectFlowTargets>
              <objectFlow
                Id="10f7cad3-26c1-4bf2-9bc9-db853d9eb1d4"
                guard="Success deserialize XML fragment"
                isLeaf="false"
                isMulticast="false"
                isMultireceive="false">
                <objectNodeMoniker
                  Id="5a27a962-8e21-41ca-bf3d-6fcc0ad952ed"
                  LastKnownName="ExceptionEntity"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </objectFlow>
            </objectFlowTargets>
          </decisionNode>
          <objectNode
            Id="5a27a962-8e21-41ca-bf3d-6fcc0ad952ed"
            name="ExceptionEntity"
            isLeaf="false"
            ordering="Unordered"
            isControlType="false">
            <objectFlowTargets>
              <objectFlow
                Id="8b9750fb-c1ff-47bf-840a-6937b7048dbe"
                isLeaf="false"
                isMulticast="false"
                isMultireceive="false">
                <activityFinalNodeMoniker
                  Id="0541c421-e6d0-4567-be6d-1a8d4320eb71"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </objectFlow>
            </objectFlowTargets>
            <upperBound>
              <literalInteger
                Id="d9903a16-9681-44d0-b272-75ebf327fd50"
                name="2147483647"
                value="2147483647" />
            </upperBound>
          </objectNode>
          <opaqueAction
            Id="dfafab74-50f3-4123-908c-0d17373245d1"
            name="Save XML Fragment into failed file"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="fac28a7f-18d7-41f5-aea7-4be88109c68f"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="0541c421-e6d0-4567-be6d-1a8d4320eb71"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <activityFinalNode
            Id="0541c421-e6d0-4567-be6d-1a8d4320eb71"
            name="ActivityFinal1"
            isLeaf="false" />
        </nodes>
      </activity>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <activity
        Id="0b25c3bd-94dc-4442-b57e-1589ef7629db"
        name="SaveToTFS"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false">
        <nodes>
          <initialNode
            Id="524c076c-8e8c-4339-9746-4045ccfd6a5c"
            name="Initial1"
            isLeaf="false">
            <objectFlowTargets>
              <objectFlow
                Id="24090911-b67d-45df-aec5-0eeb7266d9e7"
                isLeaf="false"
                isMulticast="false"
                isMultireceive="false">
                <objectNodeMoniker
                  Id="34f468f5-f732-4471-8576-8d32e97fbc31"
                  LastKnownName="ApplicationInfo"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </objectFlow>
            </objectFlowTargets>
          </initialNode>
          <opaqueAction
            Id="d1669281-e24c-4831-abb1-d4eb0843d1b0"
            name="Connect to TFS."
            isLeaf="false">
            <objectFlowTargets>
              <objectFlow
                Id="8dac1ee8-c3ee-457c-b06e-57298839ba26"
                isLeaf="false"
                isMulticast="false"
                isMultireceive="false">
                <objectNodeMoniker
                  Id="c9b3f925-c330-4dd8-a8d6-9c7f71af0aac"
                  LastKnownName="ApplicationInfo"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </objectFlow>
            </objectFlowTargets>
            <body>Today credentials are CredentialCache.DefaultNetworkCredentials;
Thus the credentials the NT service/web service are executed under must have assigned access to the TFS. 
I assume means configure AD users properly. 
Another way of doing it is to impersonate using username/password/domain parsed from 
&lt;appsettings&gt; parsed from the config file (app.exe.config/web.config).

</body>
          </opaqueAction>
          <objectNode
            Id="34f468f5-f732-4471-8576-8d32e97fbc31"
            name="ApplicationInfo"
            isLeaf="false"
            ordering="Unordered"
            isControlType="false">
            <objectFlowTargets>
              <objectFlow
                Id="813b3590-32b2-4d0c-b707-40f4bdc84f77"
                isLeaf="false"
                isMulticast="false"
                isMultireceive="false">
                <opaqueActionMoniker
                  Id="d1669281-e24c-4831-abb1-d4eb0843d1b0"
                  LastKnownName="Connect to TFS."
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </objectFlow>
            </objectFlowTargets>
            <upperBound>
              <literalInteger
                Id="93b8e955-fb40-42a4-b44d-39be5891f994"
                name="2147483647"
                value="2147483647" />
            </upperBound>
          </objectNode>
          <opaqueAction
            Id="8bda5221-ad49-49f7-b8a5-811ff186d275"
            name="Search TFS for equal exception items"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="93e325e6-a065-4279-a313-7c24eb916fd9"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="de7e2ff1-ae6d-4d25-856a-60a52b5f6590"
                  LastKnownName="Decision1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
            <body>Find any existing WI with the same stacktrace CRC in the team project spesified in the application info</body>
          </opaqueAction>
          <objectNode
            Id="c9b3f925-c330-4dd8-a8d6-9c7f71af0aac"
            name="ApplicationInfo"
            isLeaf="false"
            ordering="Unordered"
            isControlType="false">
            <objectFlowTargets>
              <objectFlow
                Id="d48fb930-8eed-48c4-926f-1386665eda9a"
                isLeaf="false"
                isMulticast="false"
                isMultireceive="false">
                <opaqueActionMoniker
                  Id="8bda5221-ad49-49f7-b8a5-811ff186d275"
                  LastKnownName="Search TFS for equal exception items"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </objectFlow>
            </objectFlowTargets>
            <upperBound>
              <literalInteger
                Id="e690f4dd-a9c5-49d9-9afa-f9cde4c449d5"
                name="2147483647"
                value="2147483647" />
            </upperBound>
          </objectNode>
          <decisionNode
            Id="de7e2ff1-ae6d-4d25-856a-60a52b5f6590"
            name="Decision1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="234457e4-5c13-4b9b-ab3a-6baf74bb6d75"
                guard="Exception does not exists in TFS"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="5c8aa93d-a91b-4058-9d8c-4f73d3b8a9e3"
                  LastKnownName="Create new WI"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
              <controlFlow
                Id="02dba894-a430-432f-bb16-dff1fd07f722"
                guard="Exception allready exists in TFS"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="dcea5dff-1be9-48ad-b300-f7637ad3976f"
                  LastKnownName="Update existing WI"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <opaqueAction
            Id="dcea5dff-1be9-48ad-b300-f7637ad3976f"
            name="Update existing WI"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="7a4cc71e-6578-45a1-a363-b54bc57b430f"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="65285b81-3078-4cf4-9a09-eb022b72b719"
                  LastKnownName="Merge1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="5c8aa93d-a91b-4058-9d8c-4f73d3b8a9e3"
            name="Create new WI"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="f36fbd75-ab2e-4732-aa2b-e274cc55a095"
                isLeaf="false">
                <mergeNodeMoniker
                  Id="65285b81-3078-4cf4-9a09-eb022b72b719"
                  LastKnownName="Merge1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <mergeNode
            Id="65285b81-3078-4cf4-9a09-eb022b72b719"
            name="Merge1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="c4c62a01-5971-4a8c-89e5-c360c8642ced"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="27870c94-09d7-4532-8891-fb980c5ae379"
                  LastKnownName="Save WI"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </mergeNode>
          <opaqueAction
            Id="27870c94-09d7-4532-8891-fb980c5ae379"
            name="Save WI"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="331cfbec-4ac3-4eaa-bf2c-112123b6c52b"
                isLeaf="false">
                <decisionNodeMoniker
                  Id="71a92540-70dd-4afb-b7ba-43237d7c85df"
                  LastKnownName="Decision2"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <opaqueAction
            Id="9401780a-67c7-4c37-ad64-dc99d852a40b"
            name="Create Event log on invalid WI"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="6e3866d0-d92a-481b-bf01-8943d223fcd7"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="40f217d9-15ab-409b-ba21-4dc928a4ff0a"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <decisionNode
            Id="71a92540-70dd-4afb-b7ba-43237d7c85df"
            name="Decision2"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="97e5fb2f-d141-477a-877d-ab81a2a94144"
                guard="WI is invalid"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="9401780a-67c7-4c37-ad64-dc99d852a40b"
                  LastKnownName="Create Event log on invalid WI"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
              <controlFlow
                Id="6f6290ed-64e2-4e16-bee2-c73234a52fbf"
                guard="WI is valid "
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="40f217d9-15ab-409b-ba21-4dc928a4ff0a"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </decisionNode>
          <activityFinalNode
            Id="40f217d9-15ab-409b-ba21-4dc928a4ff0a"
            name="ActivityFinal1"
            isLeaf="false" />
        </nodes>
      </activity>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <component
        Id="47dab9b1-3f0d-48e6-b9ce-2b5e6090b79d"
        name="Inmeta.Exception.Service.Proxy.Reader"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false">
        <appliedStereotypesInternal>
          <stereotypeInstance
            Id="661cce59-ffe6-4106-9fa6-09eece5c556f"
            name="process"
            profile="StandardProfileL2" />
        </appliedStereotypesInternal>
        <suppliersInternal>
          <dependency
            Id="4fb81677-04c6-4be6-b253-b7dd96a212ac">
            <componentMoniker
              Id="544b4cad-5728-416d-a9a8-8005aaf79c00"
              LastKnownName="Inmeta.Exception.Reporter.Web.Service"
              LastKnownLocation="ExceptionReporterModels.uml" />
          </dependency>
        </suppliersInternal>
        <ownedAttributesInternal>
          <part
            Id="1eaa4b97-1f63-4945-a5f4-be6b7f2f4fdc"
            name="TFS"
            isLeaf="false"
            isStatic="false"
            isReadOnly="false"
            isDerived="false"
            isDerivedUnion="false"
            aggregation="Composite"
            isComposite="true">
            <type_NamedElement>
              <componentMoniker
                Id="211190f2-4b12-43e2-bbb7-ee194d0dd923"
                LastKnownLocation="ExceptionReporterModels.uml" />
            </type_NamedElement>
          </part>
        </ownedAttributesInternal>
      </component>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <component
        Id="ef5970dc-8842-412f-b8dc-bc2e3cbbe0d1"
        name="Component2"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <component
        Id="a5bda3e0-1e2b-4c36-be64-e5c4ee44b4ce"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <component
        Id="b3932635-31f7-4c72-9a3e-386b1beb7833"
        name="Component3"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <component
        Id="211190f2-4b12-43e2-bbb7-ee194d0dd923"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <activity
        Id="8396e467-df5d-49e0-ab1d-6dce15bd292b"
        name="Inmeta.Exception.Service.Proxy.Process"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false"
        isReentrant="false"
        isReadOnly="false"
        isSingleExecution="false">
        <nodes>
          <initialNode
            Id="5478697a-0a0e-4737-ae3d-ad0ab4866761"
            name="Initial1"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="859493d2-2c64-4bdc-9a74-c7440114b597"
                isLeaf="false">
                <callBehaviorActionMoniker
                  Id="e6967147-51fc-4920-8a8d-ed53cfdafc8d"
                  LastKnownName="Call GetExcpetions in ExceptionService."
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </initialNode>
          <opaqueAction
            Id="382a77bf-4aec-479b-8f64-f07a8ce1a678"
            name="Read ApplicationInfo from  &quot;@&quot;.\Applications.xml&quot; file"
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="aed6baba-1cac-42e5-8e15-f28cc91babf7"
                isLeaf="false">
                <callBehaviorActionMoniker
                  Id="e755e22f-9240-4f50-be82-926bba8706e5"
                  LastKnownName="Save in TFS "
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
          </opaqueAction>
          <callBehaviorAction
            Id="e755e22f-9240-4f50-be82-926bba8706e5"
            name="Save in TFS "
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="5ca28b00-02a8-4361-8dc6-5ee1de71c2d7"
                isLeaf="false">
                <activityFinalNodeMoniker
                  Id="a5a46c5c-8c2d-4ac9-9bfa-1f59f9d4c379"
                  LastKnownName="ActivityFinal1"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
            <behavior>
              <activityMoniker
                Id="0b25c3bd-94dc-4442-b57e-1589ef7629db"
                LastKnownName="SaveToTFS"
                LastKnownLocation="ExceptionReporterModels.uml" />
            </behavior>
          </callBehaviorAction>
          <activityFinalNode
            Id="a5a46c5c-8c2d-4ac9-9bfa-1f59f9d4c379"
            name="ActivityFinal1"
            isLeaf="false" />
          <callBehaviorAction
            Id="e6967147-51fc-4920-8a8d-ed53cfdafc8d"
            name="Call GetExcpetions in ExceptionService."
            isLeaf="false">
            <flowNodeTargets>
              <controlFlow
                Id="3022b5e6-ec0b-4284-8d11-ffb33284886b"
                isLeaf="false">
                <opaqueActionMoniker
                  Id="382a77bf-4aec-479b-8f64-f07a8ce1a678"
                  LastKnownName="Read ApplicationInfo from  &quot;@&quot;.\Applications.xml&quot; file"
                  LastKnownLocation="ExceptionReporterModels.uml" />
              </controlFlow>
            </flowNodeTargets>
            <behavior>
              <activityMoniker
                Id="2d953a1a-cc94-4f3f-a15a-9d2563037b0a"
                LastKnownName="Web.Service.Exception.GetExceptions"
                LastKnownLocation="ExceptionReporterModels.uml" />
            </behavior>
          </callBehaviorAction>
        </nodes>
      </activity>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <component
        Id="eedb4306-385e-48da-935c-280c60ae7ae2"
        name="Exception Reporter"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false">
        <suppliersInternal>
          <dependency
            Id="5853965c-e1cc-48c4-b7cd-06578eb0b141">
            <componentMoniker
              Id="544b4cad-5728-416d-a9a8-8005aaf79c00"
              LastKnownName="Inmeta.Exception.Reporter.Web.Service"
              LastKnownLocation="ExceptionReporterModels.uml" />
          </dependency>
        </suppliersInternal>
      </component>
    </packageHasNamedElement>
  </packagedElements>
  <primitiveType
    Id="220a3521-e091-4221-bae9-3ef9018e845c"
    name="Integer"
    isAbstract="false"
    isLeaf="false" />
  <primitiveType
    Id="8943dc84-709e-4f62-b15a-a3273aa6f165"
    name="Boolean"
    isAbstract="false"
    isLeaf="false" />
  <primitiveType
    Id="59259974-6d55-42c6-b7bd-763d77ac8ef9"
    name="String"
    isAbstract="false"
    isLeaf="false" />
  <primitiveType
    Id="3ab42e7d-4969-445a-b209-471f5cb8209c"
    name="UnlimitedNatural"
    isAbstract="false"
    isLeaf="false" />
</modelStoreModel>